{"ast":null,"code":"import _regeneratorRuntime from\"/Users/EthanTran/Desktop/Squid-Note/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/EthanTran/Desktop/Squid-Note/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect,useContext}from'react';import EventFinder from'../apis/EventFinder';import{EventsContext}from'../context/EventsContext';import{useNavigate}from'react-router-dom';import StarRating from'./StarRating';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EventList=function EventList(props){var _useContext=useContext(EventsContext),events=_useContext.events,setEvents=_useContext.setEvents;//  Add updatepage redirect from update button via useNavigate \nvar navigate=useNavigate();// Fetch data as soon as user components is on UI screen\nuseEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return EventFinder.get(\"/\");case 3:response=_context.sent;setEvents(response.data.data.events);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);//Add function to delete an event via api\nvar handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e,id){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.stopPropagation();_context2.prev=1;_context2.next=4;return EventFinder.delete(\"/\".concat(id));case 4:response=_context2.sent;setEvents(events.filter(function(event){return event.id!==id;}));_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function handleDelete(_x,_x2){return _ref2.apply(this,arguments);};}();//update function to redirect to updatePage\nvar handleUpdate=function handleUpdate(e,id){e.stopPropagation();navigate(\"/events/\".concat(id,\"/update\"));};var handleEventSelect=function handleEventSelect(id){navigate(\"/events/\".concat(id));};//Render out the Avr star rating of a selected event \nvar renderRating=function renderRating(event){if(!event.count){return/*#__PURE__*/_jsx(\"span\",{className:\"text-warning\",children:\"0 reviews\"});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(StarRating,{rating:event.id}),/*#__PURE__*/_jsx(\"span\",{className:\"text-warning ml-1\",children:event.count})]});};return/*#__PURE__*/_jsx(\"div\",{className:\"list-group\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover table-dark\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-primary\",children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Events\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Location\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Price Range\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Ratings\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Delete\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[events&&events.map(function(event){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleEventSelect(event.id);},children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-capitalize\",children:event.name}),/*#__PURE__*/_jsx(\"td\",{className:\"text-capitalize\",children:event.location}),/*#__PURE__*/_jsx(\"td\",{children:\"$\".repeat(event.price_range)}),/*#__PURE__*/_jsx(\"td\",{children:renderRating(event)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return handleUpdate(e,event.id);},className:\"btn btn-warning\",children:\"Update\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return handleDelete(e,event.id);},className:\"btn btn-danger\",children:\"Delete\"})})]},event.id);}),\";\"]})]})});};export default EventList;","map":{"version":3,"sources":["/Users/EthanTran/Desktop/Squid-Note/src/components/EventList.jsx"],"names":["React","useEffect","useContext","EventFinder","EventsContext","useNavigate","StarRating","EventList","props","events","setEvents","navigate","fetchData","get","response","data","console","log","handleDelete","e","id","stopPropagation","delete","filter","event","handleUpdate","handleEventSelect","renderRating","count","map","name","location","repeat","price_range"],"mappings":"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","sourcesContent":["import React, {useEffect, useContext} from 'react';\nimport EventFinder from '../apis/EventFinder';\nimport { EventsContext } from '../context/EventsContext';\nimport { useNavigate } from 'react-router-dom'; \nimport StarRating from './StarRating';\n\nconst EventList = (props) => {\n  const {events, setEvents} = useContext(EventsContext)\n//  Add updatepage redirect from update button via useNavigate \n  let navigate = useNavigate()\n// Fetch data as soon as user components is on UI screen\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                const response = await EventFinder.get(\"/\");\n                setEvents(response.data.data.events);\n            } catch(err) {\n                console.log(err)\n            }  \n        }   \n        \n        fetchData();\n    }, []);\n//Add function to delete an event via api\n     const handleDelete = async (e, id) => {\n         e.stopPropagation();\n        try{\n          const response = await EventFinder.delete(`/${id}`);\n          setEvents(events.filter(event => {\n              return event.id !== id\n          }));\n        } catch(err) {\n            console.log(err);\n        }\n     };\n\n     //update function to redirect to updatePage\n     const handleUpdate = (e, id) => {\n        e.stopPropagation();\n         navigate(`/events/${id}/update`);\n     };\n\n     const handleEventSelect = (id) => {\n         navigate(`/events/${id}`)\n     }\n     //Render out the Avr star rating of a selected event \n     const renderRating = (event) => {\n         if(!event.count) {\n             return <span className=\"text-warning\">0 reviews</span>\n         }\n         return(\n         <>\n         <StarRating rating={event.id} />\n         <span className=\"text-warning ml-1\">{event.count}</span>\n         </>\n         );\n     };\n\n    return (\n        <div className=\"list-group\">\n            <table className=\"table table-hover table-dark\">\n                <thead>\n                    <tr className=\"bg-primary\">\n                        <th scope=\"col\">Events</th>\n                        <th scope=\"col\">Location</th>\n                        <th scope=\"col\">Price Range</th>\n                        <th scope=\"col\">Ratings</th>\n                        <th scope=\"col\">Edit</th>\n                        <th scope=\"col\">Delete</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {events && events.map(event =>{\n                        return (\n                            <tr onClick={() => handleEventSelect(event.id)} key= {event.id}>\n                            <td className=\"text-capitalize\">{event.name}</td>\n                            <td className=\"text-capitalize\">{event.location}</td>\n                            <td>{\"$\".repeat(event.price_range)}</td>\n                            <td>{renderRating(event)}</td>\n                            <td>\n                                 <button onClick={(e)=> handleUpdate(e, event.id)} className=\"btn btn-warning\">Update</button>\n                            </td>\n                            <td>\n                                 <button onClick ={(e) => handleDelete(e, event.id)} className=\"btn btn-danger\">Delete</button>\n                            </td>\n                        </tr>\n                        );                \n                    })};\n\n                    {/* <tr>\n                        <td>SouthBank Walk</td>\n                        <td>SouthBank </td>\n                        <td> $$ </td>\n                        <td>Rating</td>\n                        <td><button className=\"btn btn-warning\">Update</button></td>\n                        <td><button className=\"btn btn-danger\">Delete</button></td>\n                    </tr>\n\n                    <tr>\n                        <td>SouthBank Walk</td>\n                        <td>SouthBank </td>\n                        <td> $$ </td>\n                        <td>Rating</td>\n                        <td><button className=\"btn btn-warning\">Update</button></td>\n                        <td><button className=\"btn btn-danger\">Delete</button></td>\n                    </tr> */}\n                </tbody>\n             </table>\n        </div>\n    );\n};\n\nexport default EventList; \n"]},"metadata":{},"sourceType":"module"}